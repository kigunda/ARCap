/*
 * Listener.h
 *
 *  Created on: 2014-03-03
 *      Author: Kenan Kigunda
 */

#ifndef LISTENER_H_
#define LISTENER_H_

#include "includes.h"

#include "Status.h"

#define LISTENER_RECEIVE_QUEUE_SIZE	4

/**
 * The bridge abstract class provides a common structure for classes
 * that listen to data sources and forward relevant events to recipients.
 */
class Listener {
public:
	Listener();

	/*
	 * Initializes this bridge.
	 * @return OK if there are no initialization errors
	 */
	Status init();

	/*
	 * Checks the receive queue for new events.
	 * @return OK when a new event is received and processed without error
	 */
	virtual Status update() = 0;

	/*
	 * Gets the queue used to accept events.
	 * @return the receive queue
	 */
	OS_EVENT *listener();

protected:
	/* The buffer and queue used to receive events. */
	int receiveBuffer[LISTENER_RECEIVE_QUEUE_SIZE];
	OS_EVENT *receiveQueue;
};

#endif /* LISTENER_H_ */
