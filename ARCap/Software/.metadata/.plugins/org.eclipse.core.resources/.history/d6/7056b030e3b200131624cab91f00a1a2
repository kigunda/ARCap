/*
 * InfraredSender.cpp
 *
 *  Created on: 2014-03-23
 *      Author: kigunda
 */

#include "InfraredSender.h"

#define INFRARED_SENDER_ON		1
#define INFRARED_SENDER_OFF		0

// SENDING

/**
 * Sends a signal from the infrared emitters.
 * @return OK if the signal was sent successfully
 */
void InfraredSender::send() {
	IOWR_ALTERA_AVALON_PIO_DATA(PIO_IR_EMITTER_BASE, INFRARED_SENDER_ON);
	INFRAREDHANDLER_SEND_LOG(printf("InfraredHandler [emitter: on]\n"));
	OSTimeDlyHMSM(0, 0, INFRARED_HANDLER_EMITTER_ON_TIME_SECONDS, 0);
	IOWR_ALTERA_AVALON_PIO_DATA(PIO_IR_EMITTER_BASE, INFRARED_HANDLER_EMITTER_OFF);
	INFRAREDHANDLER_SEND_LOG(printf("InfraredHandler [emitter: off]\n"));
	return OK;
}

